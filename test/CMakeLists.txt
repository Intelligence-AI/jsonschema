macro(add_jsonschema_test_unix name)
  if(UNIX)
    add_test(NAME JSONSchema.${name} COMMAND
      "${CMAKE_CURRENT_SOURCE_DIR}/${name}.sh"
      "$<TARGET_FILE:jsonschema_cli>")
  endif()
endmacro()

macro(add_jsonschema_test_unix_ci name)
  if(JSONSCHEMA_TESTS_CI AND UNIX)
    add_test(NAME JSONSchema.ci.${name} COMMAND
      "${CMAKE_CURRENT_SOURCE_DIR}/ci/${name}.sh"
      "$<TARGET_FILE:jsonschema_cli>")
  endif()
endmacro()

add_jsonschema_test_unix(help)
add_jsonschema_test_unix(format_single)
add_jsonschema_test_unix(format_invalid_path)
add_jsonschema_test_unix(format_directory)
add_jsonschema_test_unix(format_cwd)
add_jsonschema_test_unix(format_multi_extension)
add_jsonschema_test_unix(format_check_single_fail)
add_jsonschema_test_unix(format_check_single_pass)
add_jsonschema_test_unix(frame)
add_jsonschema_test_unix(validate_pass_draft4)
add_jsonschema_test_unix(validate_fail_draft4)
add_jsonschema_test_unix(validate_pass_draft6)
add_jsonschema_test_unix(validate_fail_draft6)
add_jsonschema_test_unix(validate_pass_draft7)
add_jsonschema_test_unix(validate_fail_draft7)
add_jsonschema_test_unix(validate_fail_remote_no_http)
add_jsonschema_test_unix(validate_non_supported)
add_jsonschema_test_unix(validate_pass_with_metaschema)
add_jsonschema_test_unix(validate_pass_only_metaschema)
add_jsonschema_test_unix(validate_fail_only_metaschema)
add_jsonschema_test_unix(bundle_non_remote)
add_jsonschema_test_unix(bundle_remote_single_schema)
add_jsonschema_test_unix(bundle_remote_no_http)
add_jsonschema_test_unix(bundle_remote_directory)
add_jsonschema_test_unix(test_single_pass)
add_jsonschema_test_unix(test_single_fail)
add_jsonschema_test_unix(test_single_unsupported)
add_jsonschema_test_unix(lint_pass)
add_jsonschema_test_unix(lint_fail)
add_jsonschema_test_unix(lint_fix)

# CI specific tests
add_jsonschema_test_unix_ci(bundle_remote_http)
